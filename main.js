(()=>{"use strict";function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var e=function(){function e(t,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this._form=i,this._inputSelector=t.inputSelector,this._submitButtonSelector=t.submitButtonSelector,this._inactiveButtonClass=t.inactiveButtonClass,this._inputErrorClass=t.inputErrorClass,this._errorClass=t.errorClass,this._inputList=Array.from(this._form.querySelectorAll(this._inputSelector)),this._buttonElement=this._form.querySelector(this._submitButtonSelector)}var i,r;return i=e,(r=[{key:"_showInputError",value:function(t){var e=this._form.querySelector(".".concat(t.id,"-input-error"));t.classList.add(this._inputErrorClass),e.textContent=t.validationMessage,e.classList.add(this._errorClass)}},{key:"_hideInputError",value:function(t){var e=this._form.querySelector(".".concat(t.id,"-input-error"));t.classList.remove(this._inputErrorClass),e.classList.remove(this._errorClass)}},{key:"_isValid",value:function(t){t.validity.valid?this._hideInputError(t):this._showInputError(t)}},{key:"_setEventListeners",value:function(){var t=this;this._inputList.forEach((function(e){e.addEventListener("input",(function(){t._isValid(e),t._toggleButtonState(t._inputList,t._buttonElement)}))}))}},{key:"_hasInvalidInput",value:function(t){return t.some((function(t){return!t.validity.valid}))}},{key:"_toggleButtonState",value:function(t,e){this._hasInvalidInput(t)?(e.classList.add(this._inactiveButtonClass),e.disabled=!0):(e.classList.remove(this._inactiveButtonClass),e.disabled=!1)}},{key:"enableValidation",value:function(){return this._setEventListeners()}}])&&t(i.prototype,r),e}();function i(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var r=function(){function t(e,i){var r=i.width,s=i.height;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._width=r,this._height=s,this._intervalsX=0,this._intervalsY=0,this._step=0,this._minimum=0,this._arrayOfIntevals=[],this._ctx=e.getContext("2d"),this._arrayOfIntervals=[],this._intervalX=0,this._intervalY=0,this._startValueY=0,this._arrayData=[],this._objLength=0}var e,r;return e=t,(r=[{key:"_drawAxes",value:function(){this._ctx.beginPath(),this._ctx.lineWidth=2,this._ctx.fillStyle="#000000",this._ctx.font="18px  Roboto, Arial, sans-serif",this._ctx.moveTo(50,50),this._ctx.lineTo(50,this._height-50),this._ctx.lineTo(this._width-50,this._height-50),this._ctx.stroke(),this._ctx.moveTo(45,55),this._ctx.lineTo(50,50),this._ctx.lineTo(55,55),this._ctx.stroke(),this._ctx.moveTo(this._width-55,this._height-55),this._ctx.lineTo(this._width-50,this._height-50),this._ctx.lineTo(this._width-55,this._height-45),this._ctx.stroke(),this._drawVerticalDashesAndSignatures(),this._drawHorizontalDashesAndSignatures(),this._ctx.closePath(),this._drawGrid()}},{key:"_drawVerticalDashesAndSignatures",value:function(){for(var t=1;t<=this._intervalsX-1;t++)this._ctx.moveTo(50+this._intervalX*t,this._height-60),this._ctx.lineTo(50+this._intervalX*t,this._height-40),this._ctx.textAlign="center",t%2>0&&this._ctx.fillText(this._arrayOfIntervals[t-1],50+this._intervalX*(t-1)+this._intervalX/2,this._height-20),this._ctx.stroke()}},{key:"_drawHorizontalDashesAndSignatures",value:function(){for(var t=1;t<this._intervalsY;t++)this._ctx.moveTo(40,450-this._intervalY*t),this._ctx.lineTo(60,450-this._intervalY*t),this._ctx.textAlign="right",this._ctx.fillText(String(this._makeRounding(this._startValueY*t)),35,456-this._intervalY*t);this._ctx.stroke()}},{key:"_drawChart",value:function(t){this._ctx.beginPath(),this._ctx.lineWidth=2,this._ctx.fillStyle="#953735",this._ctx.textAlign="center",this._ctx.font="18px  Roboto, Arial, sans-serif";for(var e=(this._height-100-this._intervalY)/(this._startValueY*(this._intervalsY-1))*(1/6),i=1;i<=this._intervalsX-1;i++)if(Object.keys(t).includes(String(this._arrayOfIntervals[i]))){var r=Number(t[this._arrayOfIntervals[i]]);this._ctx.fillRect(55+this._intervalX*i,this._height-50-e*r,this._intervalX-10,e*r)}this._ctx.stroke(),this._ctx.fillStyle="#000000";for(var s=1;s<=this._intervalsX-1;s++)if(Object.keys(t).includes(String(this._arrayOfIntervals[s]))){var n=Number(t[this._arrayOfIntervals[s]]);s%2>0?this._ctx.fillText(this._arrayOfIntervals[s],50+this._intervalX*s+this._intervalX/2,this._height-60-e*n):this._ctx.fillText(this._arrayOfIntervals[s],50+this._intervalX*s+this._intervalX/2,this._height-80-e*n)}this._ctx.stroke(),this._ctx.closePath()}},{key:"_clear",value:function(){this._ctx.clearRect(0,0,this._width,this._height)}},{key:"_findFrequency",value:function(){for(var t=this,e={},i=function(i){t._arrayData.forEach((function(r){t._arrayOfIntervals[i]<r&&r<=t._arrayOfIntervals[i+1]&&(e[t._arrayOfIntervals[i+1]]?e[t._arrayOfIntervals[i+1]]+=1:e[t._arrayOfIntervals[i+1]]=1)}))},r=0;r<this._arrayOfIntervals.length-1;r++)i(r);return this._objLength=Object.keys(e).length,6===this._objLength&&(this._intervalsY=10,this._startValueY=.02),5===this._objLength&&(this._intervalsY=8,this._startValueY=.05),4===this._objLength&&(this._intervalsY=7,this._startValueY=.1),3===this._objLength&&(this._intervalsY=8,this._startValueY=.1),2===this._objLength&&(this._intervalsY=10,this._startValueY=.1),0===this._objLength&&(this._intervalsY=11,this._startValueY=.1),this._intervalY=(this._height-100)/this._intervalsY,e}},{key:"_getArrayOfIntervals",value:function(){this._arrayOfIntevals=[];for(var t=0;t<=this._intervalsX-2;t++){var e=this._minimum-1+this._step*t;String(e).length>6?this._arrayOfIntevals.push(Number(e.toFixed(2))):this._arrayOfIntevals.push(e)}return this._arrayOfIntevals}},{key:"_drawGrid",value:function(){this._ctx.beginPath(),this._ctx.lineWidth=1,this._ctx.strokeStyle="#000000";for(var t=1;t<this._intervalsY;t++)this._ctx.moveTo(60,450-this._intervalY*t),this._ctx.lineTo(this._width-50,450-this._intervalY*t);this._ctx.stroke(),this._ctx.closePath()}},{key:"_makeRounding",value:function(t){return String(t%1).length>5?10*t.toFixed(2)%1==0?t.toFixed(1):t.toFixed(2):t}},{key:"_init",value:function(t,e){this._arrayData=t;var i=Math.floor(e.getIntervals/5);this._intervalsX=i>0?e.getIntervals+2*i+2:e.getIntervals+3,this._step=e.getStepValue,this._minimum=e.getMinimum,this._intervalX=(this._width-100)/this._intervalsX,this._arrayOfIntervals=this._getArrayOfIntervals()}},{key:"run",value:function(t,e){this._init(t,e);var i=this._findFrequency();this._clear(),this._drawAxes(),this._drawChart(i)}}])&&i(e.prototype,r),t}(),s=document.querySelector(".footer__title"),n=document.querySelector(".footer__information"),a=document.querySelectorAll(".input"),h=document.querySelector(".input_quantity"),o=document.querySelector(".measurements__form"),l=document.querySelector(".step"),_=document.querySelector(".arithmetic-mean"),u=document.querySelector(".standard-deviation"),c=document.querySelector(".minimum"),v=document.querySelector(".maximum"),f=document.querySelector(".coefficient-of-variation"),d=document.querySelector(".deviation-from-the-nominal"),m=document.querySelector(".footer__arrow"),y=document.querySelector(".canvas"),x=new r(y,{width:y.width,height:y.height});new e({formSelector:".measurements__form",inputSelector:".measurements__input",submitButtonSelector:".measurements__button",inactiveButtonClass:"measurements__button_inactive",inputErrorClass:"measurements__input_type_error",errorClass:"measurements__input-error_active"},o).enableValidation(),s.addEventListener("click",(function(){n.classList.toggle("footer__information_active"),m.classList.toggle("footer__arrow_active")})),o.addEventListener("submit",(function(t){!function(t){t.preventDefault();var e=[];a.forEach((function(t){e.push(Number(t.value))}));var i,r=(i=e,Math.max.apply(null,i)),s=function(t){return Math.min.apply(null,t)}(e),n=Number(h.value),o=((r-s)/n).toFixed(2),m=function(t){for(var e=0,i=0;i<t.length;i++)e+=t[i];return(e/t.length).toFixed(2)}(e),y=Math.sqrt(function(t,e){for(var i=0,r=0;r<e.length;r++)i+=Math.pow(e[r]-t,2);return(i/e.length).toFixed(2)}(m,e)).toFixed(3),g=function(t,e){return(t/e).toFixed(3)}(y,m),p=function(t,e){return t-90}(m).toFixed(3);l.textContent=o,_.textContent=m,u.textContent=y,c.textContent=s,v.textContent=r,f.textContent=g,d.textContent=p;var b={getIntervals:n,getStepValue:o,getMinimum:s};x.run(e,b)}(t)}))})();